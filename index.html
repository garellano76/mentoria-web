<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <title>Prueba Javascript</title>
    <style>
        .square {
            width: 100px;
            height: 100px;
        }

        .red {
            background-color: red;
        }

        .blue {
            background-color: blue;
        }
    </style>
</head>
<body>
    <div id="parentDiv">
       <div id="squareDiv" class="square red"></div>
       <button id="changeColorButton">Load Users</button>
    </div>

    <img id="imgLoad" src="" alt="">

    <table>
        <thead>
            <tr>
                <th>Nombre Completo</th>
            </tr>
        </thead>
        <tbody id="userTable">

        </tbody>
    </table>

    <script>            
        //ejemplo de uso de Dom
        //Event Bubbling (Burbujeo de eventos)   
        // Ajax 
        
        $('#changeColorButton').click(function(event) {
            $.getJSON("http://mentoria10.segic.cl/", function(data){
                console.log(data);

                let names = data.map((user) => user.firstName + " " +user.lastName);
                console.log(names);
                names.forEach(name => {
                    let trElement = "<tr><td>" + name + "</td></tr/>";
                    $('#userTable').append(trElement);
                    $('#userTable > tr').click(function() {
                        $(this)
                            .fadeOut("slow", function(){
                                $(this).remove();
                        });
                    })
                });                 
            });
        });

        /*$('#changeColorButton').click(function(event) {
            $.getJSON( "https://aws.random.cat/meow?ref=public-apis", function( data ) {
                console.log(data);

                $('#imgLoad')
                    .attr('src', data.file)
                    .fadeIn("slow")
                    .click(function() {
                        $('#imgLoad').fadeOut("slow");
                    });
            });
        });*/

        /*$('#changeColorButton').click(function(event) {
            //console.log("El terrible click !!!");
            if ($('#squareDiv').hasClass('red')){
                $('#squareDiv')
                    .removeClass('red')
                    .addClass('blue');
            }else{
                $('#squareDiv')
                    .removeClass('blue')
                    .addClass('red');
            }*/   

            /*$( "#squareDiv" ).fadeOut( "slow", function() {
                console.log('termino de desaparecer');*/
        //});
    //});

        /*document
            .getElementById('changeColorButton')
            .addEventListener('click', function(event) {
                event.stopPropagation();

                let divElement = document
                    .getElementById('squareDiv');

                if (divElement.classList.contains('red')){
                    divElement.classList.replace('red', 'blue');
                }else{
                    divElement.classList.replace('blue', 'red');
                }                                      
            });

        document
            .getElementById('parentDiv')
            .addEventListener('click', function(event) {
                    console.log('yeah Baby');    
            });*/

        var tasks = [
            {
                "name": "Estudiar Javascript",
                "duration": 60
            },
            {
                "name": "Estudiar Vue",
                "duration": 150
            },
            {
                "name": "Estudiar Laravel",
                "duration": 100
            }
        ];

        //let  taskNames = [];
        /*for (let i = 0; i < tasks.length; i++) {
            taskNames.push(tasks[i].name);           
        }*/

        /*tasks.forEach(function(task){
            taskNames.push(task.name);
        });*/

        // map filter reduce
        // arrow function JS PHP Dart

        // (parametros) => return implicito

        // let taskNames = tasks.map((task) => task.name);

        /*let difficultTasks = [];
        tasks.forEach(function(task) {
            if (task.duration >= 100)  {
                difficultTasks.push(task.name);
            }            
        });*/

        /*let difficultTasks = tasks.filter(function(task) {
            return task.duration >= 100:
        });*/

        /*let difficultTasks =tasks
            .filter((task) => task.duration >= 100)
            .map((task) => task.name);

        console.log(difficultTasks);

        let nombre = "Juan Perez";
        console.log('Hola, ' + nombre.toUpperCase());*/

        /*let frutas = ['Manzana', 'Peras', 'Naranjas', 'Platano'];
        let frutasEliminadas = frutas.splice(1, 1, 'Uva');        
        console.log(frutas);
        console.log(frutasEliminadas);
        console.log(frutas.indexOf('Platano'));*/

    </script>
</body>
</html>
